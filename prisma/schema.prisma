generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Driver {
  driver_id Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  phone_num String?
  date_join DateTime @default(now())
  sales     Sales[]
  stocks    Stock[]
}

model Product {
  product_id  Int         @id @default(autoincrement())
  name        String
  price       Float
  description String?
  image       String?
  SalesItem   SalesItem[]
  stocks      Stock[]
}

model Sales {
  sale_timestamp DateTime    @default(now())
  driver_id      Int
  sale_id        Int         @id @default(autoincrement())
  driver         Driver      @relation(fields: [driver_id], references: [driver_id])
  SalesItem      SalesItem[]
}

model Stock {
  stock_id   Int      @id @default(autoincrement())
  quantity   Int
  created_at DateTime @default(now())
  driver_id  Int
  product_id Int
  driver     Driver   @relation(fields: [driver_id], references: [driver_id])
  product    Product  @relation(fields: [product_id], references: [product_id])
}

model SalesItem {
  id         Int     @id @default(autoincrement())
  sales_id   Int
  product_id Int
  quantity   Int
  price      Float
  Product    Product @relation(fields: [product_id], references: [product_id])
  Sales      Sales   @relation(fields: [sales_id], references: [sale_id])
}
